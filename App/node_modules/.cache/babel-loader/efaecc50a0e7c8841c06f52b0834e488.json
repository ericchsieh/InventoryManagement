{"ast":null,"code":"import _classCallCheck from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/src/pages/Login.jsx\";\nimport React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport \"./Login.css\";\nimport UserDataContext from \"./context\";\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inherits(Login, _React$Component);\n  function Login(props) {\n    var _this;\n    _classCallCheck(this, Login);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault();\n      var url = \"https://www.students.cs.ubc.ca/~shasan01/sql_commands.php\";\n      var loginForm = _assertThisInitialized(_assertThisInitialized(_this));\n      var formData = new FormData();\n      formData.append(\"login\", _this.state.uname);\n      var requestOptions = {\n        method: \"POST\",\n        body: formData\n      };\n      fetch(url, requestOptions).then(function (response) {\n        return response.text();\n      }).then(function (body) {\n        var body_json = JSON.parse(body);\n        console.log(body_json);\n        if (!body_json) {\n          document.getElementById('incorrect-login').style.display = 'block';\n        } else {\n          loginForm.context.user_id = parseInt(body_json.user_id);\n          loginForm.context.elevated = body_json.admin_access == \"1\";\n          loginForm.context.full_name = body_json.full_name;\n          loginForm.context.authenticated = true;\n          loginForm.context.departments = Object.values(body_json.departments);\n          console.log(loginForm.context);\n          loginForm.setState({\n            authenticated: true\n          });\n        }\n      });\n\n      // var loginForm = this;\n      // var url = \"https://www.students.cs.ubc.ca/~shasan01/login.php\";\n      // var formData = new FormData(); // stores POST information\n      // formData.append(\"post\", \"Faculty_Member\")\n      // formData.append(\"uname\", this.state.uname);\n\n      // const requestOptions = {\n      //     method: \"POST\",\n      //     body: formData,\n      // };\n\n      // fetch(url, requestOptions)\n      //     .then(function (response) {\n      //         return response.text();\n      //     })\n      //     .then(function (body) {\n      //         const body_json = JSON.parse(body);\n      //         loginForm.setState({authenticated: body_json.authenticated});\n      //         if (!body_json.authenticated) {\n      //             document.getElementById('incorrect-login').style.display = 'block';\n      //         }\n      //     });\n    };\n    _this.state = {\n      uname: '',\n      pword: '',\n      authenticated: false\n    };\n    return _this;\n  }\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      if (this.context.authenticated) {\n        return /*#__PURE__*/React.createElement(Navigate, {\n          to: \"/dashboard\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 20\n          }\n        });\n      }\n      // <div className=\"Login-container\">\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n        class: \"vh-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container py-5 h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"row d-flex justify-content-center align-items-center h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-margin\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        class: \"mb-5 text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, \"Sign In\"), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        autocomplete: \"off\",\n        autofocus: true,\n        class: \"form-control mx-auto w-auto\",\n        placeholder: \"Faculty Member ID\",\n        type: \"text\",\n        id: \"uname\",\n        name: \"username\",\n        value: this.state.uname,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            uname: e.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        class: \"form-control mx-auto\",\n        type: \"submit\",\n        value: \"Login\",\n        onClick: function onClick(e) {\n          return _this2.handleFormSubmit(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }\n      }))))))))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"incorrect-login\",\n        className: \"Incorrect-Login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, \"Incorrect Login\"));\n    }\n  }]);\n  return Login;\n}(React.Component);\nLogin.contextType = UserDataContext;\nexport default Login;","map":{"version":3,"names":["React","Navigate","UserDataContext","Login","props","handleFormSubmit","event","preventDefault","url","loginForm","formData","FormData","append","state","uname","requestOptions","method","body","fetch","then","response","text","body_json","JSON","parse","console","log","document","getElementById","style","display","context","user_id","parseInt","elevated","admin_access","full_name","authenticated","departments","Object","values","setState","pword","e","target","value","Component","contextType"],"sources":["/Users/erichsieh/Documents/GitHub/project_g2i4q_g9y0b_s0q8j/cpsc304-app/src/pages/Login.jsx"],"sourcesContent":["import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport \"./Login.css\";\nimport UserDataContext from \"./context\";\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            uname: '',\n            pword: '',\n            authenticated: false,\n        }\n    }\n\n    handleFormSubmit = event => {\n        event.preventDefault();\n\n        var url = \"https://www.students.cs.ubc.ca/~shasan01/sql_commands.php\";\n\n        var loginForm = this;\n        var formData = new FormData();\n        formData.append(\"login\", this.state.uname);\n\n        const requestOptions = {\n            method: \"POST\",\n            body: formData\n        };\n\n        fetch(url, requestOptions)\n            .then(function (response) {\n                return response.text();\n            })\n            .then(function (body) {\n                const body_json = JSON.parse(body);\n                console.log(body_json);\n                if (!body_json) {\n                    document.getElementById('incorrect-login').style.display = 'block';\n                } else {\n                    loginForm.context.user_id = parseInt(body_json.user_id);\n                    loginForm.context.elevated = body_json.admin_access == \"1\";\n                    loginForm.context.full_name = body_json.full_name;\n                    loginForm.context.authenticated = true;\n                    loginForm.context.departments = Object.values(body_json.departments);\n                    console.log(loginForm.context);\n                    loginForm.setState({authenticated: true});\n                }\n            });\n        \n        // var loginForm = this;\n        // var url = \"https://www.students.cs.ubc.ca/~shasan01/login.php\";\n        // var formData = new FormData(); // stores POST information\n        // formData.append(\"post\", \"Faculty_Member\")\n        // formData.append(\"uname\", this.state.uname);\n\n        // const requestOptions = {\n        //     method: \"POST\",\n        //     body: formData,\n        // };\n        \n        // fetch(url, requestOptions)\n        //     .then(function (response) {\n        //         return response.text();\n        //     })\n        //     .then(function (body) {\n        //         const body_json = JSON.parse(body);\n        //         loginForm.setState({authenticated: body_json.authenticated});\n        //         if (!body_json.authenticated) {\n        //             document.getElementById('incorrect-login').style.display = 'block';\n        //         }\n        //     });\n    }\n\n    render() {\n        if (this.context.authenticated) {\n            return <Navigate to='/dashboard' />\n        }\n        // <div className=\"Login-container\">\n        return (\n            <>\n            <section class=\"vh-100\">\n            <div class=\"container py-5 h-100\">\n            <div class=\"row d-flex justify-content-center align-items-center h-100\">\n            <div class=\"col-md-4\">\n            <div class=\"card\">\n            <div className=\"card-margin\">\n                <form>\n                    <h3 class=\"mb-5 text-center\">\n                        Sign In\n                    </h3>\n                    <div class=\"mb-3\">\n                        <input \n                        autocomplete=\"off\" autofocus\n                        class=\"form-control mx-auto w-auto\"\n                        placeholder=\"Faculty Member ID\"\n                        type=\"text\" id=\"uname\" name=\"username\" \n                        value={this.state.uname}\n                        onChange={e => this.setState({uname: e.target.value})}\n                        />\n                    </div>\n                    <div class=\"mb-3\">\n                        <input\n                        class=\"form-control mx-auto\"\n                        type=\"submit\" value=\"Login\"\n                        onClick={e => this.handleFormSubmit(e)}\n                        />\n                    </div>\n                </form>\n            </div>   \n            </div>\n            </div>\n            </div>\n            </div>\n            </section>\n\n\n            <div id=\"incorrect-login\" className=\"Incorrect-Login\">\n                Incorrect Login\n            </div>\n            </>\n        )\n    }\n}\nLogin.contextType = UserDataContext;\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}